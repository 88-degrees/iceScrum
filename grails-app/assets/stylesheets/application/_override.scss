/**
- Copyright (c) 2019 Kagilum SAS.
-
- This file is part of iceScrum.
-
- iceScrum is free software: you can redistribute it and/or modify
- it under the terms of the GNU Affero General Public License as published by
- the Free Software Foundation, either version 3 of the License.
-
- iceScrum is distributed in the hope that it will be useful,
- but WITHOUT ANY WARRANTY; without even the implied warranty of
- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- GNU General Public License for more details.
-
- You should have received a copy of the GNU Affero General Public License
- along with iceScrum.  If not, see <http://www.gnu.org/licenses/>.
-
- Authors:
-
- Vincent Barrier (vbarrier@kagilum.com)
- Nicolas Noullet (nnoullet@kagilum.com)
**/

@font-face {
  font-family: 'averta-regular';
  src: url('./fonts/averta-regular.woff2') format('woff2')
}

@font-face {
  font-family: 'averta-bold';
  src: url('./fonts/averta-bold.woff2') format('woff2')
}

html, body {
  font-family: averta-regular;
}

strong {
  font-family: averta-bold;
}

////////////////////
// Button
////////////////////

.btn {
  font-size: 0.9375rem;
  font-family: averta-bold;
  border: none;
}

.btn-primary {
  text-shadow: 0 0.125rem 0.25rem #054ca6;

  &:hover {
    background-color: $primary;
    box-shadow: 0 0.5rem 1.75rem 0 rgba(0, 103, 232, 0.44);
  }

  &:not(:disabled):not(.disabled):active {
    background-color: $primary;
  }

  &.btn-sm {
    color: $primary;
    text-shadow: none;
    background-image: linear-gradient(to top, $is-btn-secondary-start, $is-btn-secondary-end);
    box-shadow: 0 1px 0.1875rem 0 $is-shadow-color-2;

    &:hover {
      background-image: linear-gradient(to top, $is-btn-secondary-start, $is-btn-secondary-end);
    }

    &:not(:disabled):not(.disabled):active {
      color: $primary;
    }
  }
}

.btn-secondary {
  color: $is_text-color-alt;
  box-shadow: 0 0.125rem 0.5625rem 0 $is-shadow-color-1;
  background-image: linear-gradient(to top, $is-btn-secondary-start, $is-btn-secondary-end);

  &:hover {
    background-color: $is-bg-color;
    box-shadow: 0 0.5rem 1.75rem 0 $is-shadow-color-1;
  }

  &.btn-sm {
    box-shadow: 0 0 0 1px $is-outline-color inset; // Simulate border
    font-family: averta-regular;
    text-shadow: none;
    background: none;

    &:hover, &:not(:disabled):not(.disabled):active {
      background-color: $is-bg-color;
    }
  }
}

.btn-sm {
  font-size: $is-font-size-sm;
  line-height: 1.6;

  &:hover {
    box-shadow: 0 0.5rem 1.75rem 0 $is-shadow-color-1;
  }
}

// Emulating bootstrap 3 toolbar (TODO check if good approach)
.btn-toolbar {
  margin-left: 0.625rem; // Offset the first child's margin
  > .btn,
  > .btn-group,
  > .btn-menu,
  > .input-group {
    margin-left: 0.625rem;
  }
}

////////////////////
// Form
////////////////////

form label {
  font-size: $is-font-size-sm;
  font-weight: 600;
}

.form-control, .nav-item {
  font-size: $is-font-size-sm;
}

.form-control:not(:disabled):focus, .form-control:not(:disabled):hover {
  box-shadow: 0 8px 28px 0 rgba(8, 12, 29, 0.15);
  background: $is-bg-color;
}

.form-control {
  &:disabled,
  &[readonly] {
    border-color: transparent;
  }
}

////////////////////
// Modal
////////////////////

.modal-content {
  box-shadow: 0 2.625rem 3rem 0 rgba(8, 12, 29, 0.21);
}

.modal-title {
  @extend %is-title;
}

.modal-header {
  padding-left: 1.625rem;
  padding-right: 1.625rem;

  .close {
    padding: 0;
    margin: 0.3125rem 0 0 0;
    opacity: 1;
    @include square-background(1.25rem);
    @include background-image-retina('close');

    &:not(:disabled):not(.disabled):hover, &:not(:disabled):not(.disabled):focus {
      opacity: 1;
    }
  }
}

////////////////////
// Toast
////////////////////

.toast-container {
  position: absolute;
  top: 0.9375rem;
  right: 0;
  z-index: 100000
}

.toast {
  padding: 0.9375rem;
  padding-bottom: 1.5rem;
  padding-top: 0;

  &:not(:last-child) {
    margin-bottom: 0;
  }
  &:not(:first-child) {
    margin-top: -0.5rem;
  }
}

.toast-header {
  position: relative;
  border-radius: 4px;
  box-shadow: 0 9px 9px 0 rgba(35, 41, 48, 0.2);

  .toast-close {
    cursor: pointer;
    position: absolute;
    right: 5px;
    top: 5px;
    @include square-background(0.625rem);
    @include background-image-retina('remove-dark');
  }
}

.toast-content {
  display: flex;
  align-items: center;
  line-height: 1.17;
  .toast-icon {
    flex: 0 0 auto;
    @include rectangle-background(2.3125rem, 2.125rem);
    margin-left: -0.375rem;
    margin-right: 0.375rem;
  }
  .toast-error {
    background-image: url("alert-error.svg");
  }
  .toast-warning {
    background-image: url("alert-warning.svg");
  }
}

////////////////////
// Other
////////////////////

.nav-link.active, .navbar-nav .active .nav-link {
  font-family: averta-bold;
}


.nav-fill .nav-item {
  text-align: left;
}

.nav-link.disabled {
  pointer-events: none;
}

//https://stackoverflow.com/questions/51010306/angularjs-ui-bootstrap-dropdown-button-with-bootstrap-4
.dropdown.open .dropdown-menu {
  display: block;
}

.dropdown-toggle:not(.no-caret) {
  &::after {
    display: inline-block;
    content: "";
    margin-left: 0.4em;
    vertical-align: 0.2em;
    width: 6px;
    height: 6px;
    transform: rotate(45deg);
    border-right: 2px solid;
    border-bottom: 2px solid;
  }

  &:empty::after {
    margin-left: 0;
  }
}

.dropdown-header {
  font-family: averta-bold;
}

.tooltip-inner {
  box-shadow: 0 9px 24px 0 rgba(35, 41, 48, 0.15);
}

// It seems that with the new bootstrap the arrow position is computed by JS and applied on the element directly, we do it here the old way with CSS
.tooltip {
  &.top .arrow {
    bottom: 0;
    left: 50%;
    margin-left: -$tooltip-arrow-width/2;
  }

  &.right .arrow {
    top: 50%;
    left: 0;
    margin-top: -$tooltip-arrow-width/2;
  }

  &.left .arrow {
    top: 50%;
    right: 0;
    margin-top: -$tooltip-arrow-width/2;
  }

  &.bottom .arrow {
    top: 0;
    left: 50%;
    margin-left: -$tooltip-arrow-width/2;
  }
}