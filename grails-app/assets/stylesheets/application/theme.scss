////////////////////
// iS variables, mixins & placeholders
////////////////////

// Light mode
$is-bg-color: #ffffff;
$is-bg-color-alt: #f4f4f9;
$is-bg-gradient-start: #fafafd;
$is-bg-gradient-end: #f4f4f9;
$is-text-color: #687583;
$is_text-color-alt: #111111;
$is-btn-secondary-start: #f5f5fa;
$is-shadow-color-1: rgba(156, 164, 171, 0.5);
$is-shadow-color-2: rgba(156, 164, 171, 0.62);

//// Dark-mode
//$is-bg-color: #282829;
//$is-bg-color-alt: #3c3c3e;
//$is-bg-gradient-start: #3e3e40;
//$is-bg-gradient-end: #29292a;
//$is-text-color: #b6babf; // or #f4f4f9 = DILEMMA
//$is_text-color-alt: #ffffff;
//$is-btn-secondary-start: #292929; // By Nico
//$is-shadow-color-1: rgba(97, 100, 107, 0.5); // By Nico
//$is-shadow-color-2: rgba(97, 100, 107, 0.62); // By Nico

$is-primary-color: #0067e8;
$is-outline-color: #c8c8cc;
$is-font-size-sm: 0.875rem;

$is-state-colors: (
        "todo": #AAAAAA,
        "frozen": #AAAAAA,
        "suggested": #ffcc01,
        "accepted": #ff6b1c,
        "estimated": #ff3333,
        "planned": #c88cff,
        "inProgress": #00abfc,
        "inReview": #002ee8,
        "done": #27d285
);

%is-title {
  font-size: 1.25rem;
  font-family: averta-bold;
  color: $is_text-color-alt;
}

////////////////////
// Override bootstrap variables
////////////////////

$body-bg: $is-bg-color;
$primary: $is-primary-color;
$secondary: $is-bg-color;
$body-color: $is-text-color;
$border-radius-sm: .25rem;
$progress-border-radius: 0;

$link-color: $is-text-color;
$link-hover-color: $is-text-color;

$btn-padding-x: 1.7rem;
$btn-padding-y: 0.625rem;
$btn-padding-x-sm: 0.8rem;

$input-bg: $is-bg-color;
$input-color: $is-text-color;
$input-height: 1.875rem;
$input-border-color: $is-outline-color;
$input-padding-x: 0.5rem;

$navbar-light-color: $is-text-color-alt;
$navbar-light-hover-color: $is-text-color-alt;
$navbar-light-active-color: $is-primary-color;

$nav-tabs-border-width: 0;
$nav-tabs-link-active-color: $primary;
$nav-tabs-border-radius: 0;
$nav-tabs-link-active-bg: $is-bg-color;

$card-border-width: 0;
$card-bg: $is-bg-color;

////////////////////
// Import Bootstrap
////////////////////

@import "../vendors/bootstrap/scss/functions";
@import "../vendors/bootstrap/scss/variables";
@import "../vendors/bootstrap/scss/mixins";
@import "../vendors/bootstrap/scss/root";
@import "../vendors/bootstrap/scss/reboot";
@import "../vendors/bootstrap/scss/type";
@import "../vendors/bootstrap/scss/images";
@import "../vendors/bootstrap/scss/code";
@import "../vendors/bootstrap/scss/grid";
@import "../vendors/bootstrap/scss/tables";
@import "../vendors/bootstrap/scss/forms";
@import "../vendors/bootstrap/scss/buttons";
@import "../vendors/bootstrap/scss/transitions";
@import "../vendors/bootstrap/scss/dropdown";
@import "../vendors/bootstrap/scss/button-group";
@import "../vendors/bootstrap/scss/input-group";
@import "../vendors/bootstrap/scss/custom-forms";
@import "../vendors/bootstrap/scss/nav";
@import "../vendors/bootstrap/scss/navbar";
@import "../vendors/bootstrap/scss/card";
@import "../vendors/bootstrap/scss/breadcrumb";
@import "../vendors/bootstrap/scss/pagination";
@import "../vendors/bootstrap/scss/badge";
@import "../vendors/bootstrap/scss/jumbotron";
@import "../vendors/bootstrap/scss/alert";
@import "../vendors/bootstrap/scss/progress";
@import "../vendors/bootstrap/scss/media";
@import "../vendors/bootstrap/scss/list-group";
@import "../vendors/bootstrap/scss/close";
@import "../vendors/bootstrap/scss/modal";
@import "../vendors/bootstrap/scss/tooltip";
@import "../vendors/bootstrap/scss/popover";
@import "../vendors/bootstrap/scss/carousel";
@import "../vendors/bootstrap/scss/utilities";
@import "../vendors/bootstrap/scss/print";

////////////////////
// Override style
////////////////////

@font-face {
  font-family: 'averta-regular';
  src: url('./fonts/averta-regular.woff2') format('woff2')
}

@font-face {
  font-family: 'averta-bold';
  src: url('./fonts/averta-bold.woff2') format('woff2')
}

html, body {
  font-family: averta-regular;
}

strong {
  font-family: averta-bold;
}

.btn {
  font-size: 0.9375rem;
  font-family: averta-bold;
  border: none;
}

.btn-primary {
  text-shadow: 0 0.125rem 0.25rem #054ca6;

  &:hover {
    background-color: $primary;
    box-shadow: 0 0.5rem 1.75rem 0 rgba(0, 103, 232, 0.44);
  }

  &:not(:disabled):not(.disabled):active {
    background-color: $primary;
  }

  &.btn-sm {
    color: $primary;
    text-shadow: none;
    background-image: linear-gradient(to top, $is-btn-secondary-start, $is-bg-color);
    box-shadow: 0 0.0625rem 0.1875rem 0 $is-shadow-color-2;

    &:hover {
      background-image: linear-gradient(to top, $is-btn-secondary-start, $is-bg-color);
    }

    &:not(:disabled):not(.disabled):active {
      color: $primary;
    }
  }
}

.btn-secondary {
  color: $is_text-color-alt;
  box-shadow: 0 0.125rem 0.5625rem 0 $is-shadow-color-1;
  background-image: linear-gradient(to top, $is-btn-secondary-start, $is-bg-color);

  &:hover {
    background-color: $is-bg-color;
    box-shadow: 0 0.5rem 1.75rem 0 $is-shadow-color-1;
  }

  &.btn-sm {
    box-shadow: 0 0 0 0.0625rem $is-outline-color inset; // Simulate border
    font-family: averta-regular;
    text-shadow: none;
    background: none;

    &:hover, &:not(:disabled):not(.disabled):active {
      background-color: $is-bg-color;
    }
  }
}

.btn-sm {
  font-size: $is-font-size-sm;
  line-height: 1.6;

  &:hover {
    box-shadow: 0 0.5rem 1.75rem 0 $is-shadow-color-1;
  }
}

form label {
  font-size: $is-font-size-sm;
  font-weight: 600;
}

.form-control, .nav-item {
  font-size: $is-font-size-sm;
}

.nav-link.active, .navbar-nav .active .nav-link {
  font-family: averta-bold;
}

//https://stackoverflow.com/questions/51010306/angularjs-ui-bootstrap-dropdown-button-with-bootstrap-4
.dropdown.open .dropdown-menu {
  display: block;
}

// Emulating bootstrap 3 toolbar (TODO check if good approach)
.btn-toolbar {
  margin-left: 0.625rem; // Offset the first child's margin
  > .btn,
  > .btn-group,
  > .input-group {
    margin-left: 0.625rem;
  }
}

.modal-title {
  @extend %is-title;
}

.modal-header {
  padding-left: 1.625rem;
  padding-right: 1.625rem;

  .close {
    padding: 0;
    margin: 0.3125rem 0 0 0;
    opacity: 1;
    width: 1.25rem;
    height: 1.25rem;
    @include img-retina('close.png', 'close@2x.png', 1.25rem, 1.25rem);

    &:not(:disabled):not(.disabled):hover, &:not(:disabled):not(.disabled):focus {
      opacity: 1;
    }
  }
}

////////////////////
// Select
////////////////////

.select2-container {
  .select2-choice {
    height: $input-height;
    line-height: 1rem;
    box-shadow: none;

    .select2-chosen {
      padding: $input-padding-y $input-padding-x;
    }
  }
}

.select2-container .select2-choices .select2-search-field input,
.select2-container .select2-choice,
.select2-container .select2-choices,
.select2-search input {
  background-color: $is-bg-color;
  font-family: averta-regular;
}

.select2-container-multi {
  .select2-choices {
    box-shadow: none;

    .select2-search-choice {
      margin: 0.125rem;
      padding: 0.4375rem 1.3125rem 0.375rem 0.375rem;
      color: $is_text-color-alt;
      border: none;
      box-shadow: 0 0.0625rem 0.1875rem 0 $is-shadow-color-2;

      &:not(:first-child) {
        margin-left: 0.3125rem;
      }

      &.invert {
        color: white;
      }
    }

    .select2-search-field input {
      height: $input-height !important;
      padding: $input-padding-y $input-padding-x;
    }
  }

  .select2-search-choice-close {
    width: 0.625rem;
    height: 0.625rem;
    right: 0.375rem;
    left: auto;
    top: 0.5625rem;
    margin-top: 0;
    background-position: right top !important;
    @include img-retina('removetag-dark.png', 'removetag-dark@2x.png', 0.625rem, 0.625rem);
  }

  .select2-search-choice.invert .select2-search-choice-close {
    @include img-retina('removetag-light.png', 'removetag-light@2x.png', 0.625rem, 0.625rem);
  }
}

////////////////////
// Layout
////////////////////

.view.with-details {
  .content {
    float: left;
    width: 65%;
  }

  [ui-view='details'] {
    float: left;
    width: 35%;
  }
}

////////////////////
// iceScrum style
////////////////////

.main {
  background-image: linear-gradient(to bottom, $is-bg-gradient-start, $is-bg-gradient-end);
}

// TODO re-enable with correct loading images
.logo, .loading-text, #application-loading, .loading-logo {
  display: none;
}

.widgets .card {
  margin-top: 1.25rem;
  background: none;

  .card-header {
    padding-left: 0;
    padding-right: 0;
    background: none;

    .card-header-title {
      @extend %is-title;
    }
  }

  .card-body {
    border-radius: 0.375rem;
    box-shadow: 0 0.125rem 0.5625rem 0 rgba(62, 57, 107, 0.07);
    background-color: $is-bg-color;
  }
}

@each $state, $color in $is-state-colors {
  .color-state-#{$state} {
    background-color: $color;
  }
}

.states {
  height: 1rem;

  .state {
    opacity: 0.2;

    .state-name {
      opacity: 1.0;
      font-size: 0.5625rem;
      font-weight: 600;
    }

    &.state-completed, &.state-current {
      opacity: 1.0;
    }
  }
}

[ui-view="details"] .card {
  .card-header {
    background-color: $is-bg-color-alt;
  }

  .card-footer {
    background-color: $is-bg-color;
    border-top: solid 1px #d3d8de;

    .btn-toolbar {
      justify-content: flex-end;
    }
  }

  .nav-item {
    background-color: $is-bg-color-alt;
  }

  .nav-link {
    padding-bottom: 0.125rem;
  }
}