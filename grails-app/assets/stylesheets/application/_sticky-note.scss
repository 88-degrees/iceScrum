/**
- Copyright (c) 2019 Kagilum SAS.
-
- This file is part of iceScrum.
-
- iceScrum is free software: you can redistribute it and/or modify
- it under the terms of the GNU Affero General Public License as published by
- the Free Software Foundation, either version 3 of the License.
-
- iceScrum is distributed in the hope that it will be useful,
- but WITHOUT ANY WARRANTY; without even the implied warranty of
- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- GNU General Public License for more details.
-
- You should have received a copy of the GNU Affero General Public License
- along with iceScrum.  If not, see <http://www.gnu.org/licenses/>.
-
- Authors:
-
- Vincent Barrier (vbarrier@kagilum.com)
- Nicolas Noullet (nnoullet@kagilum.com)
**/

.sticky-notes {
  display: flex;
  flex-wrap: wrap;

  .sticky-note-container {
    margin: 10px;
  }
}

.sticky-note-feature, .sticky-note-story {

  .sticky-note {
    padding: 9px;

    .title {
      font-size: 1rem;
      font-family: averta-bold;
    }

    .item-values {
      font-size: 0.625rem;
    }

    .id {
      font-size: 0.75rem;
      font-weight: 600;
    }

    .description {
      font-size: 0.75rem;
      line-height: 1.17;
    }
  }
}

.sticky-note-feature {
  width: $is-feature-width;
  height: $is-feature-height;

  .sticky-note {
    width: $is-feature-width;
    height: $is-feature-height;
    border-radius: 6px;
    overflow: hidden;

    .head {
      display: flex;
      justify-content: space-between;
      line-height: 1;
    }

    .content {
      margin-top: 10px;
      height: 49px;
      margin-bottom: 14px;
    }

    .actions {
      justify-content: space-evenly;
    }
  }
}

.sticky-note-story {
  width: $is-story-width;
  height: $is-story-heigth;

  .sticky-note {
    width: $is-story-width;
    height: $is-story-heigth;

    .head {
      display: flex;
      justify-content: space-between;
    }

    .content {
      height: 73px;
      margin-bottom: 9px;

      .item-values {
        height: 15px;
      }

      .title {
        height: 24px;
      }

      .description {
        height: 42px;
      }
    }

    .follow {
      .fa-star-o, &.active .fa-star {
        display: inline-block;
      }

      .fa-star, &.active .fa-star-o {
        display: none;
      }
    }
  }
}

.sticky-note-task {
  width: $is-task-width;
  height: $is-task-height;

  .sticky-note {
    padding: 6px;
    width: $is-task-width;
    height: $is-task-height;
    border-radius: 6px;

    .head {
      display: flex;
      justify-content: space-between;
      margin-bottom: 5px;

      .id {
        padding-right: 2px;
        line-height: 17px;
        font-size: 0.8125rem;
        font-weight: 600;
      }

      .responsible {
        height: 17px;
      }
    }

    .content {
      padding-left: 1px;
      padding-right: 1px;
      height: 44px;
      margin-bottom: 9px;

      .item-values {
        font-size: 0.625rem;
      }

      .title {
        line-height: 1.17;
        height: 28px;
        font-size: 0.75rem;
        font-weight: 600;
      }

      .description {
        line-height: 1.1;
        font-size: 0.625rem;
        height: 44px;
      }
    }

    .tags {
      padding-left: 1px;
      padding-right: 1px;
    }
  }
}

.sticky-note-feature, .sticky-note-task {
  .content.has-description {
    .description {
      display: none;
    }
  }

  &:hover {
    .content.has-description {
      .item-values {
        display: none;
      }

      .title {
        display: none;
      }

      .description {
        display: inline-block;
      }
    }
  }
}

.sticky-note {
  color: $is_text-color-alt;
  position: relative;

  a {
    color: $is_text-color-alt;
    text-decoration: none;
  }

  &.invert {
    color: white;

    a {
      color: white;
    }
  }

  .title, .description {
    overflow: hidden;
  }

  .state-progress {
    height: 15px;
    position: absolute;
    bottom: 0;
    right: 0;
    left: 0;

    .progress {
      height: 15px;
      background-color: rgba(255, 255, 255, 0.31);
    }

    .progress-bar {
      background-color: white;
    }

    .state {
      top: 0;
      right: 8px;
      font-size: 0.625rem;
      text-align: right;
      font-weight: bold;
      position: absolute;
    }

    .status {
      top: 0;
      left: 8px;
      position: absolute;
      font-size: 0.625rem;
    }
  }

  &:hover .actions {
    > .action * {
      visibility: visible;
    }
  }

  .actions {
    font-size: 0.8125rem;
    display: flex;
    justify-content: space-between;

    .action {
      > * {
        visibility: hidden;
      }

      &.active {
        > * {
          visibility: visible;
        }
      }

      &.comments {
        .fa-comment-o, &.active .fa-comment {
          display: inline-block;
        }

        .fa-comment, &.active .fa-comment-o {
          display: none;
        }
      }

      &.acceptances-tests {
        .fa-check-square-o, &.active .fa-check-square {
          display: inline-block;
        }

        .fa-check-square, &.active .fa-check-square-o {
          display: none;
        }
      }
    }
  }

  .badge {
    font-size: 0.75rem;
    padding: 0;

    > .limited {
      display: none;
    }

    > .full {
      display: inline;
    }
  }

  .tags {
    height: 27px;

    .tag {
      font-size: 0.625rem;
      background: white;
      border-radius: 2px;
      padding: 2px 3px;
      box-shadow: 0 1px 3px 0 rgba(156, 164, 171, 0.62);
      color: $is_text-color-alt;

      &.invert {
        color: white;
      }
    }

    .badge {
      > .full {
        display: none;
      }

      > .limited {
        display: inline;
      }
    }
  }
}